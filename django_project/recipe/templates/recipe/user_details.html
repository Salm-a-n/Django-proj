{% extends 'layout/base.html' %}
{% block title %}Recipes{% endblock %}
{% block content %}

<h2 class="mb-4 text-center">
  {{ user.name }} — Recipes
</h2>

<div class="card shadow">

  <div class="card-body p-0">
    <table class="table table-hover table-bordered mb-0 align-middle">
      <thead class="table-dark text-center">
        <tr>
          <th>Recipe Name</th>
          <th>Total Views</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>

        {% for recipe in recipes %}
        <tr>
          <td>{{ recipe.title }}</td>
          <td>{{ recipe.views }}</td>
          <td class="text-center">
            <a
              href="{% url 'recipe_detail' recipe.id %}?next={{ request.get_full_path }}"
              class="btn btn-sm btn-primary"
            >
              View Recipe
            </a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="2" class="text-center text-muted py-4">
            No recipes found for this user
          </td>
        </tr>
        {% endfor %}

      </tbody>
    </table>
  </div>
  <div class="card-footer">
    
    {% if recipes.has_other_pages %}
    <nav aria-label="User recipe pagination">
      <ul class="pagination justify-content-center mb-2">

        {% if recipes.has_previous %}
          <li class="page-item">
            <a class="page-link" href="?page={{ recipes.previous_page_number }}">
              Previous
            </a>
          </li>
        {% endif %}

        {% for num in recipes.paginator.page_range %}
          <li class="page-item {% if recipes.number == num %}active{% endif %}">
            <a class="page-link" href="?page={{ num }}">
              {{ num }}
            </a>
          </li>
        {% endfor %}

        {% if recipes.has_next %}
          <li class="page-item">
            <a class="page-link" href="?page={{ recipes.next_page_number }}">
              Next
            </a>
          </li>
        {% endif %}

      </ul>
    </nav>
    {% endif %}

    <div class="text-center">
      <a href="{% url 'users_list' %}" class="btn btn-secondary">
        ← Back 
      </a>
    </div>

  </div>
</div>

{% endblock %}
